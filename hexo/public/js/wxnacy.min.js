var digits=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","!","@","#","$","%","^","&","*"];var NUM=["0","1","2","3","4","5","6","7","8","9"];var letter=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var LETTER=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];var special=["!","@","#","$","%","^","&","*"];function getRandomFunc(e){var t=new Array(e);t[0]=LETTER[parseInt(Math.random()*LETTER.length)];t[1]=letter[parseInt(Math.random()*letter.length)];t[2]=special[parseInt(Math.random()*special.length)];t[3]=NUM[parseInt(Math.random()*NUM.length)];for(var n=4;n<e;n++){t[n]=digits[parseInt(Math.random()*digits.length)]}var o=t.join("");return t.join("")}function getRandom(e){var t=getRandomFunc(e);document.getElementById("out").innerHTML=t}var SECRET_KEY="5f71fbb6f071d5dc2a4221bb1f891492";function sortDict(e){keys=Object.keys(e);keys.sort();newDict={};keys.forEach(function(t,n){newDict[t]=e[t]});return newDict}function create_sign(e,t,n){e=sortDict(e);params="";for(var o in e){params=params+o+"="+e[o]+"&"}params=params+"ts="+t+"&";params=params+"rs="+n;sign=CryptoJS.HmacSHA1(params,SECRET_KEY).toString().toUpperCase();return sign}function encryptParams(e){var t=(new Date).getTime();var n=getRandomFunc(10);var o=create_sign(e,t,n);e["ts"]=t;e["rs"]=n;e["sign"]=o;return e}function get_page_pv(){var e=document.getElementById("busuanzi_value_page_pv").innerHTML;return e}function create_visit(){var e=get_page_pv();if(e!=""&&e!="undefined"){clearInterval(pagePvTimer);var t=encryptParams({route:window.location.pathname,page_view:e});fetch("/api/blog/page_view",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){})}}function create_crypto(e){var t=document.getElementById("msg").value;var n=document.getElementById("key").value;fetch("/api/crypto",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(encryptParams({content:t,type:e,key:n}))}).then(function(e){return e.json()}).then(function(t){console.log(t);body=t.data;if(e=="default"||e=="hmac"){document.getElementById("crypto").style.display="none";document.getElementById("hash").style.display="block";document.getElementById("md5").innerHTML=body.md5;document.getElementById("sha1").innerHTML=body.sha1;document.getElementById("sha256").innerHTML=body.sha256;document.getElementById("sha512").innerHTML=body.sha512}else{document.getElementById("hash").style.display="none";document.getElementById("crypto").style.display="block";document.getElementById("result").innerHTML=body.result}})}var getAccessToken=function(){var e=Cookies.get("_US");if(e!=null&&e!=undefined&&e!=""&&e!="null"){console.log("cookies",e);return Promise.resolve(e)}return new Promise(function(e,t){fetch("/api/access_token").then(function(e){return e.json()}).then(function(t){console.log("fetch;",t);var n=t.data;Cookies.set("_US",n);e(n)}).catch(function(e){console.log(e);t(e)})})};function doSearchByGoogle(){var e=document.getElementById("w-search").value;if(e==""){return}e="site:https://wxnacy.com "+e;e=encodeURIComponent(e);var t="https://www.google.com/search?q="+e;window.open(t,"_blank")}function doEnterSearch(){var e=window.event;if(e.key=="Enter"){doSearchByGoogle()}}function doUrlencode(e){var t=document.getElementById("plain");var n=t.value;if(e=="encode"){n=encodeURIComponent(n);t.value=n}else if(e=="decode"){n=decodeURIComponent(n);t.value=n}}function doConvertSize(){var e=window.event;var t=e.path[0];var n=t.id;var o=t.value;if(isNaN(o)){t.value=o.replace(/\D+/g,"")}o=t.value;if(o==""){return}o=parseFloat(o);var a=["bytes","kb","mb","gb","tb"];var r=0;if(n=="bit"){r=o/8}else if(n=="bytes"){r=o}else if(n=="kb"){r=o*Math.pow(1024,1)}else if(n=="mb"){r=o*Math.pow(1024,2)}else if(n=="gb"){r=o*Math.pow(1024,3)}else if(n=="tb"){r=o*Math.pow(1024,4)}var i=r*8;document.getElementById("bit").value=i;for(var c=0;c<a.length;c++){document.getElementById(a[c]).value=r/Math.pow(1024,c)}}function onlyNum(){if(!(event.keyCode==46)&&!(event.keyCode==8)&&!(event.keyCode==37)&&!(event.keyCode==39))if(!(event.keyCode>=48&&event.keyCode<=57||event.keyCode>=96&&event.keyCode<=105))event.returnValue=false}function checkNaN(){var e=window.event.path[0].value;console.log(e);if(isNaN(e)){event.returnValue=false}}function isEmpty(e){if(e==""||e==null||e==undefined||e=="undefined"){return true}return false}function getValue(e){var t=e+"=";var n=window.location.search;var o=n.indexOf("?"+t);if(o==-1){o=n.indexOf("&"+t)}if(o!=-1){var a=o+t.length+1;var r=n.indexOf("&",a);if(r==-1){return decodeURIComponent(n.substring(a))}else{return decodeURIComponent(n.substring(a,r))}}}function visitor(){fetchGet("https://ipapi.co/json/").then(function(e){params={ip:e.ip,url:window.location.href,referrer:document.referrer,ext_property:e};fetchPost("/api/v1/visitor_log",params).then(function(e){})})}function fetchGet(e){return fetchRequest(e,"GET")}function fetchPost(e,t){return fetchRequest(e,"POST",t)}function fetchRequest(e,t,n){var o={authorization:"XXXXXXXXX"};if(t.toLowerCase()=="post"){o["Content-Type"]="application/json"}return new Promise(function(a,r){fetch(e,{method:t,headers:o,body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){a(e)}).catch(function(e){console.log(e);r(e)})})}visitor();