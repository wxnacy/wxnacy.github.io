---
title: æ¨èå‡ æ¬¾è·å–å½“å‰ ip çš„å…è´¹ api æ¥å£
date: 2017-12-22 10:15:48
tags: [å·¥å…·]
---

å¹³å¸¸å·¥ä½œä¸­ç»å¸¸éœ€è¦æŸ¥è¯¢å½“å‰ ip åœ°å€ï¼Œå¼€å‘ä¸­ä¹Ÿéœ€è¦é€šè¿‡ ip è·å–ä¸€äº›ä½ç½®ä¿¡æ¯ï¼Œåœ¨è¿™é‡Œè®°å½•å‡ æ¬¾å¯ä»¥ä½¿ç”¨çš„å…è´¹ api æ¥å£ã€‚

<!-- more --><!-- toc -->

## ip-api
ip-api æ˜¯æˆ‘æœ€æ—©æ‰¾è¿‡çš„æœåŠ¡ï¼Œ[å®˜ç½‘](http://ip-api.com/)å¯ä»¥æŸ¥è¯¢å½“å‰è®¿é—®çš„ ip ä½ç½®ç­‰ä¿¡æ¯ã€‚

![/images/ip-api.png](/images/ip-api_1231.png)

æ¥å£æ–‡æ¡£ä¸º http://ip-api.com/docs/api:json

è®¿é—®éå¸¸ç®€å•

```bash
$ curl http://ip-api.com/json
```
```json
{
    "as": "AS22552 eSited Solutions",
    "city": "Orlando",
    "country": "United States",
    "countryCode": "US",
    "isp": "eSited Solutions",
    "lat": 28.5106,
    "lon": -81.1976,
    "org": "eSited Solutions",
    "query": "104.222.246.242",
    "region": "FL",
    "regionName": "Florida",
    "status": "success",
    "timezone": "America/New_York",
    "zip": "32825"

}
```

é™¤äº† ip ä¿¡æ¯ï¼Œè¿˜æœ‰å½“å‰ä½ç½®çš„å¾ˆå¤šä¿¡æ¯ï¼Œè™½ç„¶åªèƒ½è·å–æœåŠ¡å™¨çš„ç²¾å‡†ç»çº¬åº¦ï¼Œä½†æ˜¯åœ¨å¾ˆå¤šæƒ…å†µä¸‹å·²ç»å¾ˆæœ‰ç”¨äº†ã€‚è¿™ä¸ªæ¥å£å”¯ä¸€çš„ä¸è¶³æ˜¯ä¸æ”¯æŒ httpsï¼Œæ‰€å¹¸æœ‰æ”¯æŒçš„ã€‚

## ipapi

[ipapi](https://ipapi.co/) è·Ÿä¸Šè¾¹åŸºæœ¬ä¸€æ ·ï¼Œå®˜ç½‘è¦æ¼‚äº®ç‚¹

![/images/ipapi.png](/images/ipapico.png)

[api](https://ipapi.co/api/?shell#introduction) æ–‡æ¡£ä¹Ÿæœ‰æ›´å¥½çš„æ”¯æŒï¼Œå…³é”®æ˜¯æ”¯æŒ https

```bash
$ curl 'https://ipapi.co/json/'
```
```json
{
    "ip": "104.222.246.242",
    "city": "Orlando",
    "region": "Florida",
    "region_code": "FL",
    "country": "US",
    "country_name": "United States",
    "postal": "32825",
    "latitude": 28.5106,
    "longitude": -81.1976,
    "timezone": "America/New_York",
    "asn": "AS22552",
    "org": "eSited Solutions"

}
```

æ‹¿åˆ°çš„ç»“æœåŸºæœ¬ä¸€è‡´ï¼Œçœ‹ä½ çš„éœ€æ±‚é€‰æ‹©å“ªä¸ªå§ï¼Œè¿™ä¸¤ä¸ªéƒ½ä¸éœ€è¦ `secret-key` å³å¯ä½¿ç”¨ï¼Œä½†ä¹Ÿæœ‰é™åˆ¶ï¼Œåº”è¯¥æ˜¯æ ¹æ® ip æ¥åšçš„ã€‚

## ipstack

ä¸¥æ ¼æ„ä¹‰ä¸Šï¼Œè¯¥æ–¹æ¡ˆä¸æ˜¯å…è´¹çš„ï¼Œä½†å®ƒæœ‰ä¸€å®šçš„å…è´¹é¢åº¦ï¼Œæ¯æœˆ 1 ä¸‡æ¡ï¼Œä¸€èˆ¬ä¸ªäººä½¿ç”¨åº”è¯¥ä¹Ÿè¶³å¤Ÿäº†ï¼Œä¼˜ç‚¹æ˜¯è·å–çš„ä¿¡æ¯æ›´å…¨ï¼Œå¾®è½¯ã€ä¸‰æ˜Ÿç­‰å¤§å‚éƒ½æœ‰ä½¿ç”¨ã€‚

![ipstack1](/images/ipstack_1258.png)

api çš„ä½¿ç”¨éœ€è¦å…ˆé€‰æ‹©ä¸€ç§ä»˜è´¹æ–¹æ¡ˆæ³¨å†Œè´¦å·ï¼Œæ ¹æ®è¿”å›çš„ä¿¡æ¯ä¸åŒï¼Œå¯ä»¥é€‰æ‹©çš„æ–¹æ¡ˆè¿˜æ˜¯æŒºå¤šçš„ã€‚

![ipstack2](/images/ipstack1_1237.png)

api çš„è°ƒç”¨ä¹Ÿå¾ˆç®€å•

```bash
http://api.ipstack.com/104.222.246.242?access_key={access_key}
```
```bash
{
    "city": null,
    "continent_code": "NA",
    "continent_name": "North America",
    "country_code": "US",
    "country_name": "United States",
    "ip": "104.222.246.242",
    "latitude": 37.751,
    "location": {
        "calling_code": "1",
        "capital": "Washington D.C.",
        "country_flag": "http://assets.ipstack.com/flags/us.svg",
        "country_flag_emoji": "ğŸ‡ºğŸ‡¸",
        "country_flag_emoji_unicode": "U+1F1FA U+1F1F8",
        "geoname_id": null,
        "is_eu": false,
        "languages": [
            {
                "code": "en",
                "name": "English",
                "native": "English"
            }
        ]
    },
    "longitude": -97.822,
    "region_code": null,
    "region_name": null,
    "type": "ipv4",
    "zip": null
}
```
## å…¶ä»–

å¦å¤–è¿˜æœ‰ä¸€äº›å…¶ä»–æ¨èï¼Œä½†ä½¿ç”¨èµ·æ¥éƒ½æ²¡æœ‰è¿™ä¸¤ä¸ªæ–¹ä¾¿
- [whatismyip](https://www.whatismyip.com/)
- [ip åœ°å€](https://zh-hans.ipshu.com/ipv4/124.95.0.91)
